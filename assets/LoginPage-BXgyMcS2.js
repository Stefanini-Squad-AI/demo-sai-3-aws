import{u as B,j as e,a as A,B as o,b as n,f as M,I as S,g as d,M as z,P as V,h as W,S as k,i as T,k as y,l as H,V as K,m as _,L as q,A as R,d as G,n as Y,D as J}from"./mui-bVcw8cZ8.js";import{r as s}from"./vendor-BPyidg2q.js";import{S as Q}from"./SystemHeader-scuVVbod.js";import{u as X,a as g,s as Z,b as ee,c as re,d as se,e as D,l as te}from"./index-DKgkcm7D.js";import{u as oe,a as ae}from"./router-Cq5RlOku.js";import"./redux-B6kvt0Aa.js";function pe(){const a=B(),h=oe(),I=ae(),c=X(),u=g(Z),p=g(ee),x=g(re),m=g(se),[t,N]=s.useState({userId:"",password:""}),[f,L]=s.useState(!1),[i,w]=s.useState({}),b=s.useRef(!1),O=s.useCallback(()=>{const r=`${window.location.origin}/demo-sai-3-aws/docs/site/index.html`;window.open(r,"_blank","noopener,noreferrer")},[]);s.useEffect(()=>{if(x&&m&&!b.current){console.log("üîÑ User already authenticated, redirecting...",{role:m.role}),b.current=!0;const r=I.state?.from?.pathname;setTimeout(()=>{r&&r!=="/login"?h(r,{replace:!0}):m.role==="admin"?h("/menu/admin",{replace:!0}):h("/menu/main",{replace:!0})},100)}},[x,m,h,I.state]),s.useEffect(()=>{x||(b.current=!1)},[x]);const E=s.useCallback(()=>{const r={};return t.userId.trim()?t.userId.length>8&&(r.userId="El ID de usuario debe tener 8 caracteres o menos"):r.userId="Por favor ingrese su ID de usuario...",t.password.trim()?t.password.length>8&&(r.password="La contrase√±a debe tener 8 caracteres o menos"):r.password="Por favor ingrese su contrase√±a...",w(r),Object.keys(r).length===0},[t]),v=s.useCallback(r=>l=>{const C=l.target.value;C.length<=8&&(N(j=>({...j,[r]:C.toUpperCase()})),i[r]&&w(j=>({...j,[r]:""})),p&&c(D()))},[i,p,c]),$=s.useCallback(async r=>{if(r.preventDefault(),!!E())try{console.log("üîê Attempting login with:",{userId:t.userId});const l=await c(te(t)).unwrap();console.log("‚úÖ Login successful, result:",l)}catch(l){console.error("‚ùå Login failed:",l)}},[t,E,c]),P=s.useCallback(r=>{(r.key==="F3"||r.key==="Escape")&&(r.preventDefault(),window.confirm("¬øEst√° seguro que desea salir del sistema?")&&window.close())},[]),F=s.useCallback(()=>{c(D())},[c]),U=r=>({"Invalid credentials":"Contrase√±a incorrecta. Intente de nuevo...","User not found":"Usuario no encontrado. Intente de nuevo...","Please check your input":"Verifique su ID de usuario y contrase√±a","Network error occurred":"No se pudo verificar el usuario. Revise su conexi√≥n."})[r]||r;return x&&m?e.jsx(A,{maxWidth:"md",sx:{py:4},children:e.jsxs(o,{sx:{textAlign:"center"},children:[e.jsx(n,{variant:"h5",gutterBottom:!0,children:"Redirigiendo..."}),e.jsx(n,{variant:"body1",color:"text.secondary",children:"Ya ha iniciado sesi√≥n. Lo redirigiremos a su panel."})]})}):e.jsx(A,{maxWidth:"md",sx:{py:4},children:e.jsxs(o,{onKeyDown:P,tabIndex:-1,children:[e.jsxs(o,{sx:{position:"relative"},children:[e.jsx(Q,{transactionId:"CC00",programName:"COSGN00C",title:"CardDemo - Aplicaci√≥n de demostraci√≥n de tarjetas",subtitle:"Modernizaci√≥n de mainframe",showNavigation:!1}),e.jsx(o,{sx:{position:"absolute",top:8,right:8,zIndex:10},children:e.jsx(M,{title:"Ver documentaci√≥n",arrow:!0,children:e.jsx(S,{onClick:O,size:"small",sx:{color:"text.secondary",backgroundColor:d(a.palette.background.paper,.8),backdropFilter:"blur(4px)",border:`1px solid ${d(a.palette.divider,.3)}`,"&:hover":{backgroundColor:d(a.palette.primary.main,.1),color:"primary.main",borderColor:"primary.main"},transition:"all 0.2s ease-in-out"},children:e.jsx(z,{fontSize:"small"})})})})]}),e.jsxs(V,{elevation:3,sx:{borderRadius:3,overflow:"hidden",background:`linear-gradient(145deg, ${d(a.palette.background.paper,.9)}, ${d(a.palette.background.default,.1)})`},children:[e.jsxs(o,{sx:{p:4,textAlign:"center",background:`linear-gradient(135deg, ${a.palette.primary.main}, ${a.palette.secondary.main})`,color:"white"},children:[e.jsx(W,{sx:{fontSize:48,mb:2}}),e.jsx(n,{variant:"h4",fontWeight:600,gutterBottom:!0,children:"NATIONAL RESERVE NOTE"}),e.jsx(n,{variant:"h6",sx:{opacity:.9},children:"THE UNITED STATES OF KICSLAND"}),e.jsx(o,{sx:{mt:2,p:2,border:"2px solid rgba(255,255,255,0.3)",borderRadius:2,fontFamily:"monospace",fontSize:"0.75rem",lineHeight:1.2,whiteSpace:"pre",textAlign:"center",overflow:"auto",backgroundColor:"rgba(0,0,0,0.1)",display:"flex",justifyContent:"center",alignItems:"center"},children:`+========================================+
|%%%%%%%  NATIONAL RESERVE NOTE  %%%%%%%%|
|%(1)  THE UNITED STATES OF KICSLAND (1)%|
|%$$              ___       ********  $$%|
|%$    {x}       (o o)                 $%|
|%$     ******  (  V  )      O N E     $%|
|%(1)          ---m-m---             (1)%|
|%%~~~~~~~~~~~ ONE DOLLAR ~~~~~~~~~~~~~%%|
+========================================+`})]}),e.jsxs(o,{sx:{p:4},children:[e.jsx(n,{variant:"h6",color:"primary.main",textAlign:"center",gutterBottom:!0,sx:{mb:3},children:"Ingrese su ID de usuario y contrase√±a, luego presione ENTER:"}),e.jsx(o,{component:"form",onSubmit:$,sx:{maxWidth:400,mx:"auto"},children:e.jsxs(k,{spacing:3,children:[e.jsx(T,{label:"ID de Usuario",value:t.userId,onChange:v("userId"),error:!!i.userId,helperText:i.userId||"(8 caracteres)",disabled:u,autoFocus:!0,inputProps:{maxLength:8,style:{textTransform:"uppercase"}},InputProps:{startAdornment:e.jsx(y,{position:"start",children:e.jsx(H,{color:"primary"})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),e.jsx(T,{label:"Contrase√±a",type:f?"text":"password",value:t.password,onChange:v("password"),error:!!i.password,helperText:i.password||"(8 caracteres)",disabled:u,autoComplete:"current-password",inputProps:{maxLength:8,style:{textTransform:"uppercase"}},InputProps:{startAdornment:e.jsx(y,{position:"start",children:e.jsx(q,{color:"primary"})}),endAdornment:e.jsx(y,{position:"end",children:e.jsx(S,{onClick:()=>L(!f),edge:"end",disabled:u,children:f?e.jsx(K,{}):e.jsx(_,{})})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),(p||Object.keys(i).length>0)&&e.jsx(e.Fragment,{children:p?e.jsx(R,{severity:"error",onClose:F,sx:{borderRadius:2},children:U(p)}):e.jsx(R,{severity:"error",sx:{borderRadius:2},children:"Corrija los errores anteriores"})}),e.jsx(G,{type:"submit",variant:"contained",size:"large",disabled:u,startIcon:e.jsx(Y,{}),sx:{py:1.5,borderRadius:2,fontWeight:600,fontSize:"1rem"},children:u?"Iniciando sesi√≥n...":"ENTER = Iniciar sesi√≥n"})]})}),e.jsx(J,{sx:{my:3}}),e.jsxs(o,{sx:{textAlign:"center"},children:[e.jsx(n,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Credenciales de prueba:"}),e.jsxs(k,{direction:"row",spacing:2,justifyContent:"center",flexWrap:"wrap",children:[e.jsx(n,{variant:"caption",sx:{bgcolor:"warning.main",color:"warning.contrastText",px:1,py:.5,borderRadius:1},children:"Admin: ADMIN001 / PASSWORD"}),e.jsx(n,{variant:"caption",sx:{bgcolor:"success.main",color:"success.contrastText",px:1,py:.5,borderRadius:1},children:"Back-Office: USER001 / PASSWORD"})]})]})]}),e.jsx(o,{sx:{p:2,bgcolor:d(a.palette.grey[100],.5),borderTop:`1px solid ${a.palette.divider}`,textAlign:"center"},children:e.jsx(n,{variant:"body2",color:"text.secondary",children:"ENTER = Iniciar sesi√≥n ‚Ä¢ F3 = Salir"})})]})]})})}export{pe as default};
